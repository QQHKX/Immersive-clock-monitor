# 沉浸式时钟功能实现情况对比

> 本文档对比沉浸式时钟（Immersive Clock）与本项目的功能实现情况

## 项目定位

**沉浸式时钟**：一个现代化的全屏时钟应用，支持时钟、倒计时、秒表与晚自习模式，内置天气、噪音提醒及噪音走势图、励志语录、课程表管理。

**本项目（沉浸式噪音监测）**：沉浸式时钟的衍生作品，专注于公开其独特的噪音监测与评分算法，移除了其他功能模块。

---

## 功能对比表

| 功能模块 | 沉浸式时钟 | 本项目 | 实现状态 | 说明 |
|---------|------------|--------|---------|------|
| **时间管理** | | | | |
| 时钟显示 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含时钟功能 |
| 倒计时 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含倒计时功能 |
| 秒表 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含秒表功能 |
| 自习模式 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含自习模式 |
| 多目标倒计时轮播 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含倒计时轮播功能 |
| **环境感知** | | | | |
| 实时天气 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含天气功能 |
| 分钟级降水预警 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含天气预警功能 |
| 气象灾害预警 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含气象预警功能 |
| **噪音监测** | | | | |
| 实时噪音监测 | ✅ | ✅ | 已实现 | 50ms 采样率，基于 Web Audio API |
| RMS/dBFS 计算 | ✅ | ✅ | 已实现 | 完整的音频信号处理链路 |
| 音频滤波器 | ✅ | ✅ | 已实现 | 高通 80Hz，低通 8000Hz |
| 三维度评分引擎 | ✅ | ✅ | 已实现 | 持续噪音、超阈时长、打断频次 |
| 实时评分显示 | ✅ | ✅ | 已实现 | 实时计算并显示评分 |
| 噪音历史记录 | ✅ | ✅ | 已实现 | LocalStorage 持久化，保留 14 天 |
| 噪音校准功能 | ✅ | ✅ | 已实现 | 3 秒校准，支持自定义基准分贝 |
| 实时波形图表 | ✅ | ✅ | 已实现 | 使用 Recharts 绘制 10 秒波形 |
| 评分与校准分离 | ✅ | ✅ | 已实现 | 评分只依赖原始 dBFS，校准仅影响显示 |
| 课表关联的历史报告 | ✅ | ❌ | 未实现 | 本项目不包含课表功能 |
| **专注氛围** | | | | |
| 励志语录 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含语录功能 |
| 多频道源支持 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含语录功能 |
| 组件开关 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含组件开关 |
| 背景定制 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含背景定制 |
| 自定义字体 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含字体定制 |
| 课表导入 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含课表功能 |
| **性能与体验** | | | | |
| PWA 支持 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含 PWA 功能 |
| 离线缓存 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含离线缓存 |
| 桌面安装 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含桌面安装 |
| 自动更新 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含自动更新 |
| 新手引导 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含新手引导 |
| 资源优化 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含资源优化 |
| 无障碍设计 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含无障碍设计 |
| 全键盘导航 | ✅ | ❌ | 未实现 | 本项目专注于噪音监测，不包含键盘导航 |

---

## 核心算法实现对比

### 噪音评分算法

| 算法组件 | 沉浸式时钟 | 本项目 | 实现状态 |
|---------|------------|--------|---------|
| RMS 计算 | ✅ | ✅ | 已实现 |
| dBFS 转换 | ✅ | ✅ | 已实现 |
| 能量平均（线性域） | ✅ | ✅ | 已实现 |
| 线性域分位数 | ✅ | ✅ | 已实现 |
| 持续噪音惩罚（40%） | ✅ | ✅ | 已实现 |
| 超阈时长惩罚（30%） | ✅ | ✅ | 已实现 |
| 打断频次惩罚（30%） | ✅ | ✅ | 已实现 |
| 智能事件段合并（500ms） | ✅ | ✅ | 已实现 |
| 评分与校准分离 | ✅ | ✅ | 已实现 |

### 数据处理流程

| 处理环节 | 沉浸式时钟 | 本项目 | 实现状态 |
|---------|------------|--------|---------|
| 麦克风采集 | ✅ | ✅ | 已实现 |
| 音频滤波 | ✅ | ✅ | 已实现 |
| 帧处理（50ms） | ✅ | ✅ | 已实现 |
| 切片聚合（30s） | ✅ | ✅ | 已实现 |
| 数据缺口检测 | ✅ | ✅ | 已实现 |
| 历史数据存储 | ✅ | ✅ | 已实现 |
| 实时评分计算 | ✅ | ✅ | 已实现 |

---

## 技术栈对比

| 技术组件 | 沉浸式时钟 | 本项目 | 说明 |
|---------|------------|--------|------|
| 前端框架 | React | React 19 | 本项目使用最新版本 |
| 构建工具 | Vite | Vite 6 | 本项目使用最新版本 |
| 类型系统 | TypeScript | TypeScript 5.8 | 本项目使用最新版本 |
| 图表库 | Recharts | Recharts 3 | 本项目使用最新版本 |
| 音频处理 | Web Audio API | Web Audio API | 完全一致 |
| 数据存储 | localStorage | localStorage | 完全一致 |
| PWA | ✅ | ❌ | 本项目不包含 PWA 功能 |
| 天气 API | 和风天气 | ❌ | 本项目不包含天气功能 |

---

## 总结

### 已实现功能（100% 完整）

本项目完整实现了沉浸式时钟的**噪音监测与评分算法**，包括：

1. **音频采集与处理**
   - Web Audio API 麦克风采集
   - 高通滤波器（80Hz）和低通滤波器（8000Hz）
   - 50ms 帧间隔的实时处理

2. **噪音评分算法**
   - 三维度加权扣分制（持续噪音 40%、超阈时长 30%、打断频次 30%）
   - 智能事件段合并（500ms 合并窗口）
   - 评分与校准分离机制

3. **数据管理**
   - 30 秒切片聚合
   - LocalStorage 历史数据持久化
   - 14 天数据保留策略

4. **用户界面**
   - 实时波形图表
   - 实时评分显示
   - 历史记录列表
   - 噪音校准功能

### 未实现功能（专注噪音监测）

本项目移除了沉浸式时钟的所有其他功能，专注于噪音算法公开：

- ❌ 时间管理功能（时钟、倒计时、秒表、自习模式）
- ❌ 环境感知功能（天气、预警）
- ❌ 专注氛围功能（语录、背景、字体、课表）
- ❌ 性能与体验功能（PWA、离线缓存、桌面安装、新手引导、无障碍设计）

### 项目价值

本项目的核心价值在于：

1. **算法公开**：将沉浸式时钟独特的噪音评分算法独立出来，供学习和研究使用
2. **代码简化**：移除了其他功能模块，使代码更易于理解和学习
3. **技术聚焦**：专注于噪音监测的核心技术，便于深入研究
4. **开源贡献**：为社区提供了一个高质量的噪音监测算法实现参考

---

## 附录：沉浸式时钟完整功能列表

根据 [沉浸式时钟 GitHub 页面](https://github.com/QQHKX/Immersive-clock)，完整功能列表如下：

### 时间管理模式
- 多模式切换：时钟 / 倒计时 / 秒表 / 自习模式一键切换
- 智能 HUD：沉浸式交互，点击或按键显示控制栏，无操作约 8 秒自动隐藏
- 高级倒计时：
  - 支持单次、高考/考研目标日倒计时
  - 多事件轮播：支持添加多个重要日期（如四级、期末考）并按设定间隔自动轮播展示
  - 个性化定制：独立配置每个倒计时项的背景色、透明度与字体样式

### 学习辅助看板
- 环境感知：
  - 实时天气：集成和风天气 API，提供分钟级降水预警与气象灾害预警
  - 噪音监测：基于 Web Audio API 的高帧率实时采样，内置评分引擎，支持基线校准、最大阈值设置及包含走势图的详细自习报告
- 专注氛围：
  - 励志语录：支持多频道源（如一言），可配置不同频道的权重与自动刷新频率
  - 组件开关：可自由隐藏噪音、语录、大字时间等组件，定制专属学习界面
  - 背景定制：支持纯色、径向渐变及上传本地图片作为背景
  - 个性化字体：支持上传自定义字体文件 (.ttf/.woff2)，打造舒适的阅读体验
  - 课表导入：支持 Excel 课表文件导入，一键同步学习计划

### 性能与体验
- PWA 支持：离线缓存、桌面安装、自动更新
- 新手友好：提供友好的首次使用引导，帮助用户快速熟悉核心功能
- 资源优化：静态资源（图片/字体/音频）分级缓存策略，秒级加载
- 无障碍设计：全键盘导航支持（Space/Enter 唤出 HUD），优化 ARIA 属性
